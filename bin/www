#!/usr/bin/env node
/**
 * @license
 * MOST Web Framework 2.0 Codename Blueshift
 * Copyright (c) 2017, THEMOST LP All rights reserved
 *
 * Use of this source code is governed by an BSD-3-Clause license that can be
 * found in the LICENSE file at https://themost.io/license
 */
// check if process was started with --require @babel/register and load development module
let applicationModule = process.execArgv.indexOf('@babel/register') ? '../server/server' : '../dist/server/server';
/**
 * @type {HttpApplication}
 */
let app = require(applicationModule);

// get port
let port = /^\d+$/.test(process.env.PORT) ? parseInt(process.env.PORT, 10) : 3000;

// get listen address
let ip = process.env.IP || '127.0.0.1';

// Listen on provided port and address
app.start({
    port: port,
    bind: ip
});
